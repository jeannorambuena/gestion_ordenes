<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Orden de Trabajo {{ orden.numero_orden }} - {{ orden.anio }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 14px;
            margin: 40px;
        }

        .titulo {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .text-justify {
            text-align: justify;
        }

        .firmas {
            margin-top: 60px;
            display: flex;
            justify-content: space-between;
        }

        .firma {
            text-align: center;
            width: 45%;
            border-top: 1px solid #000;
            padding-top: 5px;
        }

        .tomo-conocimiento {
            margin-top: 60px;
            text-align: center;
        }

        .tomo-conocimiento .nombre {
            margin-top: 20px;
            font-weight: bold;
        }

        .fecha-firma {
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="titulo">
        ILUSTRE MUNICIPALIDAD DE TENO<br>
        ORDEN DE TRABAJO N° {{ orden.numero_orden }} – {{ orden.anio }}
    </div>

    <p><strong>DE:</strong> JEFATURA(S) DEPTO DE ADMINISTRACIÓN DE EDUCACIÓN MUNICIPAL</p>
    <p><strong>A:</strong> SR(A) DIRECTOR(A) {{ orden.colegio.nombre_colegio if orden.colegio else 'COLEGIO NO ASIGNADO' }}</p>
    <p><strong>Fecha:</strong> {{ orden.fecha_inicio.strftime('%d-%m-%Y') }}</p>

    <p class="text-justify">
        Por intermedio de la presente orden de trabajo informo que Don(ña): 
        <strong>{{ orden.funcionario.nombre }} {{ orden.funcionario.apellido }}</strong>, 
        Cédula de identidad N° <strong>{{ orden.rut_cuerpo }}-{{ orden.rut_dv }}</strong>, 
        ha sido designado(a) en su Unidad Educativa para servir en el cargo de 
        <strong>{{ orden.tipo_contrato.nombre if orden.tipo_contrato else 'SIN CONTRATO' }}</strong> con un total de 
        <strong>{{ orden.horas_disponibles }}</strong> horas cronológicas en enseñanza 
        <strong>{{ 'básica' if orden.tipo_contrato and 'básica' in orden.tipo_contrato.nombre|lower else 'media' }}</strong>.
    </p>

    {% if orden.observaciones %}
    <p class="text-justify"><strong>Observación:</strong> {{ orden.observaciones }}</p>
    {% endif %}

    <p><strong>Desde:</strong> {{ orden.fecha_inicio.strftime('%d-%m-%Y') }}</p>
    <p><strong>Hasta:</strong> 
        {% if orden.es_indefinido or not orden.fecha_termino %}
            INDEFINIDO
        {% else %}
            {{ orden.fecha_termino.strftime('%d-%m-%Y') }}
        {% endif %}
    </p>

    <p class="text-justify">
        Consecuentemente con lo anterior, ruego a usted asignar las funciones respectivas al interesado 
        e informar a este departamento de educación la fecha exacta de la asunción de funciones.
    </p>

    <p class="text-justify">
        Sin otro particular, saluda atentamente a usted,
    </p>

    <div class="firmas">
        <div class="firma">
            {{ orden.jefatura_daem.nombre if orden.jefatura_daem else 'NOMBRE NO DISPONIBLE' }}<br>
            JEFE(S) DAEM
        </div>
        <div class="firma">
            {{ orden.alcalde.nombre_alcalde if orden.alcalde else 'ALCALDE NO ASIGNADO' }}<br>
            {{ orden.alcalde.cargo.upper() if orden.alcalde and orden.alcalde.cargo else 'CARGO NO DISPONIBLE' }}
        </div>
    </div>

    <div class="tomo-conocimiento">
        <p><strong>TOMO CONOCIMIENTO DE LA PRESENTE ORDEN DE TRABAJO</strong></p>
        <div class="nombre">{{ orden.funcionario.nombre }} {{ orden.funcionario.apellido }}</div>
        <div class="fecha-firma">{{ fecha_actual.strftime('%d-%m-%Y') }}</div>
    </div>

</body>
</html>
